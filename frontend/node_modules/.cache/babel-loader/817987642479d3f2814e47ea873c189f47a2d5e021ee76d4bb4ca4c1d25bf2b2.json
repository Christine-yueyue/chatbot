{"ast":null,"code":"import{useEnsureRegeneratorRuntime}from\"../../app/hook/useEnsureRegeneratorRuntime\";import{useEffect,useRef,useState}from\"react\";import{Ring}from\"@uiball/loaders\";import SpeechRecognition,{useSpeechRecognition}from\"react-speech-recognition\";import{MicIcon}from\"../icons/mic-icon\";import\"./chat-form.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SendForm(_ref){let{input,handleSubmit,isLoading,handleInputChange}=_ref;useEnsureRegeneratorRuntime();const{listening,resetTranscript,transcript,browserSupportsSpeechRecognition}=useSpeechRecognition();useEffect(()=>{const handleVisibilityChange=()=>{if(document.hidden&&listening){SpeechRecognition.stopListening();}};document.addEventListener(\"visibilitychange\",handleVisibilityChange);return()=>{document.removeEventListener(\"visibilitychange\",handleVisibilityChange);};},[listening]);useEffect(()=>{if(transcript){handleInputChange({target:{value:transcript}});}},[transcript,handleInputChange]);const toggleSpeech=()=>{if(listening){SpeechRecognition.stopListening();}else{resetTranscript();SpeechRecognition.startListening({continuous:true});}};const handleKeyDown=event=>{if(event.key===\"Enter\"&&!event.shiftKey){event.preventDefault();handleSubmit(event);}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"chat-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:input,onChange:handleInputChange,onKeyDown:handleKeyDown,placeholder:\"Type your message...\",className:\"chat-input\"}),browserSupportsSpeechRecognition&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"mic-button\",onClick:toggleSpeech,children:/*#__PURE__*/_jsx(MicIcon,{className:listening?\"text-red-500\":\"text-gray-500\"})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"send-button\",disabled:isLoading||!input.trim(),children:isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Ring,{size:20,lineWeight:5,speed:1,color:\"white\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Sending...\"})]}):\"Send\"})]});}","map":{"version":3,"names":["useEnsureRegeneratorRuntime","useEffect","useRef","useState","Ring","SpeechRecognition","useSpeechRecognition","MicIcon","jsx","_jsx","jsxs","_jsxs","SendForm","_ref","input","handleSubmit","isLoading","handleInputChange","listening","resetTranscript","transcript","browserSupportsSpeechRecognition","handleVisibilityChange","document","hidden","stopListening","addEventListener","removeEventListener","target","value","toggleSpeech","startListening","continuous","handleKeyDown","event","key","shiftKey","preventDefault","onSubmit","className","children","onChange","onKeyDown","placeholder","type","onClick","disabled","trim","size","lineWeight","speed","color"],"sources":["/Users/christine/Downloads/feedback-management-main/frontend/src/components/chat/chat-form.js"],"sourcesContent":["import { useEnsureRegeneratorRuntime } from \"../../app/hook/useEnsureRegeneratorRuntime\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { Ring } from \"@uiball/loaders\";\nimport SpeechRecognition, { useSpeechRecognition } from \"react-speech-recognition\";\nimport { MicIcon } from \"../icons/mic-icon\";\nimport \"./chat-form.css\";\n\nexport default function SendForm({\n  input,\n  handleSubmit,\n  isLoading,\n  handleInputChange,\n}) {\n  useEnsureRegeneratorRuntime();\n\n  const {\n    listening,\n    resetTranscript,\n    transcript,\n    browserSupportsSpeechRecognition,\n  } = useSpeechRecognition();\n\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (document.hidden && listening) {\n        SpeechRecognition.stopListening();\n      }\n    };\n\n    document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n    return () => {\n      document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    };\n  }, [listening]);\n\n  useEffect(() => {\n    if (transcript) {\n      handleInputChange({ target: { value: transcript } });\n    }\n  }, [transcript, handleInputChange]);\n\n  const toggleSpeech = () => {\n    if (listening) {\n      SpeechRecognition.stopListening();\n    } else {\n      resetTranscript();\n      SpeechRecognition.startListening({ continuous: true });\n    }\n  };\n\n  const handleKeyDown = (event) => {\n    if (event.key === \"Enter\" && !event.shiftKey) {\n      event.preventDefault();\n      handleSubmit(event);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"chat-form\">\n      <div className=\"input-container\">\n        <textarea\n          value={input}\n          onChange={handleInputChange}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Type your message...\"\n          className=\"chat-input\"\n        />\n        {browserSupportsSpeechRecognition && (\n          <button\n            type=\"button\"\n            className=\"mic-button\"\n            onClick={toggleSpeech}\n          >\n            <MicIcon className={listening ? \"text-red-500\" : \"text-gray-500\"} />\n          </button>\n        )}\n      </div>\n      <button \n        type=\"submit\" \n        className=\"send-button\"\n        disabled={isLoading || !input.trim()}\n      >\n        {isLoading ? (\n          <div className=\"flex items-center gap-2\">\n            <Ring size={20} lineWeight={5} speed={1} color=\"white\" />\n            <span>Sending...</span>\n          </div>\n        ) : (\n          \"Send\"\n        )}\n      </button>\n    </form>\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}